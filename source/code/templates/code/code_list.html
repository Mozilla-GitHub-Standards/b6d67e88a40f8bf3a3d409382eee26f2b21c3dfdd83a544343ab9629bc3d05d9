{% extends "code/_base_code.html" %}

{% block content %}
<div class="page-block">
    <h1 class="maintopic"><a href="{{ url('code_list') }}">Code</a>{% if tag %} / <span class="category">{{ tag.name }}</span>{% endif %}</h1>
</div>

<div id="filterable-list">
{% for alpha in object_list|groupby('sort_letter') %}
    <div class="grouper-block filter-block">
        <h2 class="grouper-header"><span class="category">{{ alpha.grouper }}</span></h2>
        {% for row in alpha.list|batch(3) %}
        <ul class="link-list filter-list clear space-below float-container">
            {% for code in row %}
            <li class="column-third">
                <a href="{{ code.get_absolute_url() }}">{{ code.name }}</a>
                {% if code.summary_or_description %}<p>{{ code.summary_or_description|safe }}</p>{% endif %}
                {% if code.organizations.all().exists() %}<span class="trailer"><i class="icon-cogs small"></i>{% for organization in code.organizations.all() %}<a class="small" href="{{ organization.get_absolute_url() }}">{{ organization.name }}</a>{% if not loop.last %}, {% endif %}{% endfor %}</span>{% endif %}
                {% if code.tags.all().exists() %}<span class="trailer"><i class="icon-tags small"></i>{% for tag in code.tags.all() %}<a class="small" href="{{ url('code_list_by_tag', tag.slug) }}">{{ tag }}</a>{% if not loop.last %}, {% endif %}{% endfor %}</span>{% endif %}
            </li>
            {% endfor %}
        </ul>
        {% endfor %}
    </div>
{% endfor %}
</div>
{% endblock content %}

{% block site_js_extra %}
{% endblock %}